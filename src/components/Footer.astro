---
import { useStoryblokApi } from "@storyblok/astro";

const today = new Date();

const storyblokApi = useStoryblokApi();
const { data } = await storyblokApi.get("cdn/stories/config", {
  version: "draft",
  resolve_links: "url",
});

const footerLinks = data?.story?.content?.footer_links;
---

<footer class="section">
  <div class="full-width">
    <div class="main">
      <div>
        <p>
          &copy; {today.getFullYear()} Stefano Verzegnassi
          <br />
           This work is licensed under <a
            href="http://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1"
            target="_blank"
            rel="license nofollow noopener noreferrer"
            >CC BY-NC 4.0</a>
        </p>
      </div>

      <ul class="links">
        {
          footerLinks &&
            footerLinks.map((l: any) => (
              <li>
                <a href={`/${l.link.url}`}>{l.title}</a>
              </li>
            ))
        }
      </ul>
    </div>

    <hr />

    <div class="made-with--section">
      <p class="made-with">
        Website made with:
        <a href="https://astro.build/" target="_blank" rel="nofollow"
          ><img class="logo" alt="Astro" src="/astro-logo-light-gradient.svg" width="460" height="160" loading="lazy" /></a
        >
        <a href="https://storyblok.com/" target="_blank" rel="nofollow"
          ><img class="logo" alt="Storyblok" src="/sb-logo-full-color-white.svg" width="251px" height="53px" loading="lazy" /></a
        >
        <a href="https://www.netlify.com/" target="_blank" rel="nofollow"
          ><img class="logo" alt="Netlify" src="/logo-netlify-small-fullcolor-darkmode.svg" width="256" height="105" loading="lazy" /></a
        >
      </p>

      <a href="#" target="_blank" rel="nofollow">Source code on GitHub</a>
    </div>
  </div>
</footer>

<style>
  footer {
    margin-top: 4rem;
    background-color: var(--color-neutral-200);
    padding: 4rem 2rem 2rem 2rem;
  }

  .main {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .links {
    text-align: right;
    padding: 0;
    margin: 0;

    & li {
      list-style-type: none;
    }
  }

  .made-with--section {
    display: flex;
    column-gap: 4rem;
  }

  .made-with {
    flex-grow: 1;
    display: inline-flex;
    align-items: center;
    column-gap: 1rem;
    row-gap: 1rem;
  }

  .logo {
    height: 1.5rem;
    padding: 0 1rem;
  }

  /* Values from Webflow */
  /* Tablet: < 991px; Mobile landscape: < 767px; mobile portrait < 478px */
  @media (width < 991px) {
    .made-with--section {
      display: block;
    }
  }

  @media (width < 767px) {
    .main {
      display: block;
    }

    .links {
      text-align: left;
    }

    .made-with--section {
      display: block;
    }

    .made-with {
      width: 100%;
      flex-direction: column;
      align-items: start;
    }

    .logo {
      padding: 0;
    }
  }

  @media (width < 478px) {
  }
</style>
